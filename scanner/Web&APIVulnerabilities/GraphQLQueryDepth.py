import requests

def check_graphql_query_depth(target_url):
    # Nested query payload
    query = """
    query {
      user {
        posts {
          comments {
            replies {
              content
            }
          }
        }
      }
    }
    """
    
    try:
        response = requests.post(target_url, json={"query": query}, timeout=10)
        if response.status_code == 200 and "errors" not in response.json():
            return True  # Vulnerable
        return False  # Not Vulnerable
    except requests.RequestException:
        return False  # Unable to test
